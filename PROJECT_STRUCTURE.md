# é¡¹ç›®ç»“æ„è¯´æ˜

## ğŸ“ ç›®å½•ç»“æ„

```
Global_Searching/
â”œâ”€â”€ README.md                    # é¡¹ç›®æ€»è§ˆ
â”œâ”€â”€ experiment_plan.md           # è¯¦ç»†å®éªŒè®¡åˆ’
â”œâ”€â”€ experiment_checklist.md      # å®éªŒæ£€æŸ¥æ¸…å•
â”œâ”€â”€ quick_start.md              # å¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ PROJECT_STRUCTURE.md        # æœ¬æ–‡ä»¶ï¼šé¡¹ç›®ç»“æ„è¯´æ˜
â”‚
â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–
â”œâ”€â”€ setup.py                    # é¡¹ç›®å®‰è£…è„šæœ¬
â”œâ”€â”€ .gitignore                  # Gitå¿½ç•¥æ–‡ä»¶
â”‚
â”œâ”€â”€ configs/                    # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â””â”€â”€ cifar10_baseline.yaml   # CIFAR-10åŸºçº¿å®éªŒé…ç½®
â”‚
â”œâ”€â”€ scripts/                    # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ download_models.sh      # æ¨¡å‹ä¸‹è½½è„šæœ¬ï¼ˆLinux/Macï¼‰
â”‚   â”œâ”€â”€ download_classifiers.py # åˆ†ç±»å™¨ä¸‹è½½è„šæœ¬
â”‚   â””â”€â”€ run_baseline.py         # è¿è¡ŒåŸºçº¿å®éªŒè„šæœ¬
â”‚
â”œâ”€â”€ src/                        # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                 # æ¨¡å‹å®ç°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ base_model.py       # æ‰©æ•£æ¨¡å‹åŸºç±»
â”‚   â”‚
â”‚   â”œâ”€â”€ verifiers/              # Verifierå®ç°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base_verifier.py    # VerifieråŸºç±»
â”‚   â”‚   â””â”€â”€ classifier_verifier.py  # åˆ†ç±»å™¨Verifier
â”‚   â”‚
â”‚   â”œâ”€â”€ search/                 # Searchæ–¹æ³•å®ç°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ base_search.py      # Searchæ–¹æ³•åŸºç±»
â”‚   â”‚
â”‚   â”œâ”€â”€ evaluation/             # è¯„ä¼°æŒ‡æ ‡
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ metrics.py          # FID/ISè®¡ç®—
â”‚   â”‚
â”‚   â””â”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ config.py           # é…ç½®ç®¡ç†
â”‚       â””â”€â”€ nfe_counter.py      # NFEè®¡æ•°å™¨
â”‚
â”œâ”€â”€ models/                     # æ¨¡å‹å­˜å‚¨ç›®å½•ï¼ˆä¸åœ¨gitä¸­ï¼‰
â”‚   â”œâ”€â”€ cifar10/                # CIFAR-10æ¨¡å‹
â”‚   â””â”€â”€ imagenet64/             # ImageNet-64æ¨¡å‹
â”‚
â”œâ”€â”€ data/                       # æ•°æ®ç›®å½•ï¼ˆä¸åœ¨gitä¸­ï¼‰
â”‚   â””â”€â”€ cifar10/                # CIFAR-10æ•°æ®
â”‚
â””â”€â”€ results/                    # ç»“æœå­˜å‚¨ç›®å½•ï¼ˆä¸åœ¨gitä¸­ï¼‰
    â””â”€â”€ cifar10_baseline/       # å®éªŒç»“æœ
```

## ğŸ”§ æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. æ¨¡å‹æ¨¡å— (`src/models/`)

**BaseDiffusionModel**: æ‰€æœ‰æ‰©æ•£æ¨¡å‹çš„åŸºç±»
- `load_model()`: åŠ è½½æ¨¡å‹checkpoint
- `denoise_step()`: å•æ­¥å»å™ª
- `sample_noise()`: é‡‡æ ·åˆå§‹å™ªå£°
- `sample()`: å®Œæ•´é‡‡æ ·æµç¨‹

**å®ç°æŒ‡å—**:
- ç»§æ‰¿`BaseDiffusionModel`
- å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•
- ä½¿ç”¨`NFECounterMixin`è‡ªåŠ¨è®¡æ•°NFE

### 2. Verifieræ¨¡å— (`src/verifiers/`)

**BaseVerifier**: VerifieråŸºç±»
- `load_model()`: åŠ è½½verifieræ¨¡å‹
- `score()`: è®¡ç®—æ ·æœ¬åˆ†æ•°

**ClassifierVerifier**: åŸºäºåˆ†ç±»å™¨çš„Verifier
- ä½¿ç”¨é¢„è®­ç»ƒåˆ†ç±»å™¨è¯„ä¼°æ ·æœ¬è´¨é‡
- è¿”å›logæ¦‚ç‡æˆ–logitä½œä¸ºreward

### 3. Searchæ¨¡å— (`src/search/`)

**BaseSearch**: Searchæ–¹æ³•åŸºç±»
- `search()`: æ‰§è¡Œsearchå¹¶ç”Ÿæˆæ ·æœ¬
- è¿”å›æ ·æœ¬å’Œsearchä¿¡æ¯å­—å…¸

**å®ç°æŒ‡å—**:
- Random Search: å¤šå™ªå£°å¹¶è¡Œé‡‡æ ·ï¼Œé€‰æ‹©æœ€ä¼˜
- ZO-N: Pivot-basedè¿­ä»£æœç´¢
- NLG: å™ªå£°çº§åˆ«å¼•å¯¼

### 4. è¯„ä¼°æ¨¡å— (`src/evaluation/`)

**metrics.py**:
- `compute_fid()`: è®¡ç®—FIDåˆ†æ•°
- `compute_is()`: è®¡ç®—ISåˆ†æ•°
- `compute_fid_is()`: åŒæ—¶è®¡ç®—ä¸¤è€…

### 5. å·¥å…·æ¨¡å— (`src/utils/`)

**NFECounter**: ç»Ÿä¸€çš„NFEè®¡æ•°å™¨
- ç¡®ä¿æ‰€æœ‰æ–¹æ³•çš„NFEè®¡ç®—å…¬å¹³ä¸€è‡´
- ä½¿ç”¨ä¸Šä¸‹æ–‡ç®¡ç†å™¨è‡ªåŠ¨è®¡æ•°

**Config**: é…ç½®ç®¡ç†ç±»
- ä»YAMLæ–‡ä»¶åŠ è½½é…ç½®
- æ”¯æŒé»˜è®¤å€¼å’Œè¦†ç›–

## ğŸš€ ä½¿ç”¨æµç¨‹

### æ­¥éª¤1: å‡†å¤‡æ¨¡å‹å’Œæ•°æ®

```bash
# åœ¨è¿œç¨‹æœåŠ¡å™¨ä¸Šè¿è¡Œ
bash scripts/download_models.sh
python scripts/download_classifiers.py
```

### æ­¥éª¤2: é…ç½®å®éªŒ

ç¼–è¾‘ `configs/cifar10_baseline.yaml`ï¼Œè®¾ç½®ï¼š
- æ¨¡å‹è·¯å¾„
- æ•°æ®é›†è·¯å¾„
- é‡‡æ ·å‚æ•°
- è¯„ä¼°è®¾ç½®

### æ­¥éª¤3: è¿è¡Œå®éªŒ

```bash
# è¿è¡Œbaselineå®éªŒ
python scripts/run_baseline.py --config configs/cifar10_baseline.yaml --steps 25 50 100 200
```

## ğŸ“ æ‰©å±•æŒ‡å—

### æ·»åŠ æ–°çš„æ¨¡å‹å®ç°

1. åœ¨`src/models/`ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œå¦‚`ddpm_model.py`
2. ç»§æ‰¿`BaseDiffusionModel`
3. å®ç°æ‰€æœ‰æŠ½è±¡æ–¹æ³•
4. åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šæ¨¡å‹ç±»å‹

### æ·»åŠ æ–°çš„Searchæ–¹æ³•

1. åœ¨`src/search/`ä¸‹åˆ›å»ºæ–°æ–‡ä»¶ï¼Œå¦‚`random_search.py`
2. ç»§æ‰¿`BaseSearch`
3. å®ç°`search()`æ–¹æ³•
4. åœ¨å®éªŒè„šæœ¬ä¸­ä½¿ç”¨

### æ·»åŠ æ–°çš„Verifier

1. åœ¨`src/verifiers/`ä¸‹åˆ›å»ºæ–°æ–‡ä»¶
2. ç»§æ‰¿`BaseVerifier`
3. å®ç°`score()`æ–¹æ³•
4. åœ¨é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šverifierç±»å‹

## ğŸ” ä»£ç ç»„ç»‡åŸåˆ™

1. **æ¥å£ç»Ÿä¸€**: æ‰€æœ‰åŒç±»ç»„ä»¶ä½¿ç”¨ç›¸åŒæ¥å£
2. **æ¨¡å—åŒ–**: åŠŸèƒ½ç‹¬ç«‹ï¼Œæ˜“äºæ›¿æ¢å’Œæµ‹è¯•
3. **å¯æ‰©å±•**: ä¾¿äºæ·»åŠ æ–°çš„æ¨¡å‹ã€searchæ–¹æ³•ã€verifier
4. **å¯å¤ç°**: ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œè®°å½•æ‰€æœ‰å‚æ•°
5. **å…¬å¹³å¯¹æ¯”**: ç»Ÿä¸€çš„NFEè®¡æ•°ï¼Œç¡®ä¿å¯¹æ¯”å…¬å¹³

## ğŸ“¦ ä¾èµ–ç®¡ç†

- æ ¸å¿ƒä¾èµ–ï¼š`requirements.txt`
- å®‰è£…ï¼š`pip install -r requirements.txt`
- å¼€å‘æ¨¡å¼ï¼š`pip install -e .`

## ğŸ¯ ä¸‹ä¸€æ­¥

1. å®ç°å…·ä½“çš„æ¨¡å‹åŠ è½½ï¼ˆDDPM/EDMï¼‰
2. å®ç°Random Searchæ–¹æ³•
3. å®ç°FID/ISè¯„ä¼°
4. è¿è¡Œç¬¬ä¸€ä¸ªbaselineå®éªŒ

å‚è€ƒ `experiment_plan.md` äº†è§£è¯¦ç»†è®¡åˆ’ã€‚


